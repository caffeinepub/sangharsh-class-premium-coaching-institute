{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix favicon publishing, head tags, structured data, and ICP asset rules",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Publish favicon assets at the domain root as /favicon.png and /favicon.ico using files derived from the Sangharsh Classes logo.",
      "acceptanceCriteria": [
        "A favicon file exists at frontend/public/favicon.png and is included in the production build output at /favicon.png",
        "A favicon file exists at frontend/public/favicon.ico (or a deliberate decision is documented to ship only PNG) and is included in the production build output at /favicon.ico",
        "Fetching https://sangharshclasses.in/favicon.png returns HTTP 200 and serves an image response (not HTML) and is not rewritten to index.html",
        "If /favicon.ico is provided, fetching https://sangharshclasses.in/favicon.ico returns HTTP 200 and serves an icon/image response (not HTML) and is not rewritten to index.html"
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/favicon.png.dim_32x32.png",
          "operation": "create",
          "description": "Add the generated square PNG favicon asset (32x32) derived from the existing Sangharsh Classes logo at frontend/public/assets/generated/favicon.png.dim_32x32.png so it is tracked in-repo and available as a source artifact for the root favicon."
        },
        {
          "path": "frontend/public/assets/generated/favicon.ico.dim_256x256.ico",
          "operation": "create",
          "description": "Add the generated multi-size ICO favicon asset (up to 256x256) derived from the existing Sangharsh Classes logo at frontend/public/assets/generated/favicon.ico.dim_256x256.ico so it is tracked in-repo and available as a source artifact for the root favicon."
        },
        {
          "path": "frontend/public/favicon.png",
          "operation": "create",
          "description": "Create the root-served PNG favicon at frontend/public/favicon.png (copied/exported from frontend/public/assets/generated/favicon.png.dim_32x32.png) so the build outputs it at /favicon.png on the domain root."
        },
        {
          "path": "frontend/public/favicon.ico",
          "operation": "create",
          "description": "Create the root-served ICO favicon at frontend/public/favicon.ico (copied/exported from frontend/public/assets/generated/favicon.ico.dim_256x256.ico) so the build outputs it at /favicon.ico on the domain root."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Add favicon <link> tags in frontend/index.html head referencing /favicon.png (and /favicon.ico if shipped).",
      "acceptanceCriteria": [
        "frontend/index.html includes a <link rel=\"icon\" href=\"/favicon.png\" type=\"image/png\"> tag inside <head>",
        "If favicon.ico is shipped, frontend/index.html also includes a <link rel=\"icon\" href=\"/favicon.ico\" type=\"image/x-icon\"> (or equivalent) inside <head>",
        "After build and deploy, the rendered page source (production) contains the favicon <link> tags and they resolve successfully"
      ],
      "file_operations": [
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Add favicon link tags inside <head> referencing /favicon.png with type image/png and also /favicon.ico with an appropriate icon MIME type, without changing layout or non-favicon UI."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Add Organization/Website JSON-LD structured data in frontend/index.html referencing an absolute logo URL on https://sangharshclasses.in/.",
      "acceptanceCriteria": [
        "frontend/index.html contains a JSON-LD <script type=\"application/ld+json\"> block for Organization (or equivalent) that includes a logo URL on https://sangharshclasses.in/ referencing the deployed image",
        "The structured data does not introduce new product features or marketing claims beyond identifying the site/organization and logo",
        "The canonical URL remains https://sangharshclasses.in/ (existing canonical tag preserved)"
      ],
      "file_operations": [
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Insert a JSON-LD script block (Organization and/or WebSite) in <head> that references an absolute logo URL such as https://sangharshclasses.in/favicon.png, while preserving the existing canonical tag and avoiding any new marketing claims."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Ensure favicon files bypass SPA fallback rewriting and are served with correct content-type and reasonable caching via ICP asset rules.",
      "acceptanceCriteria": [
        "frontend/public/_redirects explicitly excludes /favicon.png (and /favicon.ico if shipped) from SPA fallback rewriting, similar to existing sitemap.xml/robots.txt exclusions",
        "frontend/.ic-assets.json includes explicit match rules for favicon.png (and favicon.ico if shipped) that set appropriate Content-Type and avoid excessively long cache max-age for these files (so updates propagate)",
        "A request to /favicon.png and /favicon.ico (if present) is served as the actual file (not index.html) in production"
      ],
      "file_operations": [
        {
          "path": "frontend/public/_redirects",
          "operation": "modify",
          "description": "Add explicit exclusions for /favicon.png and /favicon.ico so they are served directly (200) and are not rewritten by the SPA fallback rule."
        },
        {
          "path": "frontend/.ic-assets.json",
          "operation": "modify",
          "description": "Add explicit asset match rules for favicon.png and favicon.ico to set correct Content-Type headers and a short/moderate cache max-age (avoiding the default long cache) so favicon updates propagate reliably on ICP hosting."
        },
        {
          "path": "frontend/public/_headers",
          "operation": "modify",
          "description": "Optionally add explicit Content-Type header rules for /favicon.png and /favicon.ico to reinforce correct MIME types for static hosting environments that respect _headers (keep existing sitemap.xml/robots.txt rules unchanged)."
        }
      ]
    },
    {
      "id": "REQ-5",
      "summary": "Document production verification steps for favicon reachability and confirm no routing/caching prevents access after redeploy.",
      "acceptanceCriteria": [
        "Production domain https://sangharshclasses.in/favicon.png returns 200 and correct image content",
        "If shipped, production domain https://sangharshclasses.in/favicon.ico returns 200 and correct icon/image content",
        "Production domain https://sangharshclasses.in/ renders without any redesign or layout changes (only favicon/metadata/hosting behavior changes)"
      ],
      "file_operations": [
        {
          "path": "frontend/DEPLOYMENT_CHECKLIST.md",
          "operation": "modify",
          "description": "Add post-deploy verification steps to check /favicon.png and /favicon.ico return HTTP 200 with non-HTML image responses, confirm the page source contains the favicon <link> tags and JSON-LD, and confirm there are no layout changes."
        }
      ]
    }
  ]
}