{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Sangharsh Classes is a Vite + React + TailwindCSS single-page marketing website for a coaching institute (classes 7th–12th) with section-based content (Hero, About, Faculty, Courses, Contact, Footer) and WhatsApp/call/email CTAs. The repo also includes an Internet Computer (ICP) Motoko backend canister that implements role-based access control (admin/user/guest) bootstrapped via a canister environment secret and provides per-caller user profile storage. The frontend integrates Internet Identity authentication, creates identity-bound canister actors, and uses TanStack React Query for caching and data fetching. Additionally, the project includes SEO and static-hosting assets/config (canonical + OpenGraph tags, sitemap.xml, robots.txt, noindex guard for the non-canonical domain, SPA fallback rules, and asset-canister headers/caching config).",
  "existing_features": [
    {
      "id": "IF-1",
      "title": "Single-page public marketing homepage",
      "synonyms": [
        "Marketing SPA",
        "Landing page"
      ],
      "description": "Renders a public homepage composed of Header, Hero, About, Faculty, Courses, Contact, and Footer sections, plus a floating WhatsApp CTA.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-2",
      "title": "Responsive header with smooth-scroll section navigation",
      "synonyms": [
        "Section navigation",
        "Mobile sheet menu"
      ],
      "description": "Fixed header that changes style on scroll and provides desktop + mobile navigation buttons that smoothly scroll to section IDs via scrollIntoView.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-3",
      "title": "Hero section with CTAs and stats",
      "synonyms": [
        "Top banner",
        "Hero block"
      ],
      "description": "Hero banner with background image overlay, bilingual tagline, “100% Result Guarantee” badge, CTA buttons (enroll/view courses), and stat cards.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-4",
      "title": "About section (static content)",
      "synonyms": [
        "About Sangharsh Classes"
      ],
      "description": "Displays hardcoded multi-paragraph about text (split into paragraphs) and a centered “Result Oriented” feature card.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-5",
      "title": "Faculty section (static cards)",
      "synonyms": [
        "Teacher listing",
        "Faculty grid"
      ],
      "description": "Renders a responsive grid of hardcoded faculty cards with photos, subject badges, role, experience, and specialization fallback text.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-6",
      "title": "Courses section (classes 7th–12th)",
      "synonyms": [
        "Programs grid",
        "Offerings"
      ],
      "description": "Shows six hardcoded class offerings (7–12) with descriptions, feature bullets, and a promotional subject banner.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-7",
      "title": "Contact section with deep-link actions",
      "synonyms": [
        "Call/email/WhatsApp actions"
      ],
      "description": "Displays phone/email/location and provides one-click actions using tel:, mailto:, and wa.me links/buttons plus a “Schedule a Visit” WhatsApp CTA.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-8",
      "title": "Footer with quick links and social links",
      "synonyms": [
        "Site footer",
        "Social icons"
      ],
      "description": "Footer includes branding/about text, section anchor quick links, contact info, outbound social links (Facebook/Instagram/YouTube), and a built-with attribution line.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-9",
      "title": "Floating WhatsApp contact button",
      "synonyms": [
        "WhatsApp FAB",
        "Sticky WhatsApp CTA"
      ],
      "description": "Fixed-position WhatsApp button that opens a chat to the configured phone number in a new tab.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-10",
      "title": "Top-level React error boundary with fallback UI",
      "synonyms": [
        "AppErrorBoundary",
        "Runtime fallback screen"
      ],
      "description": "Wraps the app in an error boundary and displays a user-friendly error card with refresh/home actions to prevent a blank screen on runtime errors.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-11",
      "title": "Runtime diagnostics logging",
      "synonyms": [
        "Global error logging",
        "Unhandled rejection capture"
      ],
      "description": "Registers window error and unhandledrejection listeners and logs initialization markers to aid production debugging.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-12",
      "title": "Runtime SEO guards (canonical/noindex enforcement)",
      "synonyms": [
        "SEO guard",
        "Canonical domain enforcement"
      ],
      "description": "At app startup, enforces canonical and og:url to the custom domain and applies robots noindex/nofollow when running on the Caffeine subdomain.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-13",
      "title": "Homepage SEO markup in index.html",
      "synonyms": [
        "Canonical tag",
        "OpenGraph tags"
      ],
      "description": "Defines title/meta description plus canonical and og:url tags pointing to https://sangharshclasses.in/ in the HTML entrypoint.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-14",
      "title": "SEO static assets (sitemap.xml and robots.txt)",
      "synonyms": [
        "Sitemap",
        "Robots"
      ],
      "description": "Provides a root sitemap.xml listing the canonical homepage URL and a robots.txt that allows crawling and references the sitemap.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-15",
      "title": "SPA fallback page with static-file exclusions",
      "synonyms": [
        "404.html fallback",
        "Deep link support stub"
      ],
      "description": "404.html redirects unknown paths to the app root while excluding sitemap.xml/robots.txt/favicon.ico from redirects.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-16",
      "title": "Static hosting rules for SPA fallback and MIME types",
      "synonyms": [
        "_redirects",
        "_headers"
      ],
      "description": "Netlify-style rules to serve sitemap.xml and robots.txt directly (200) while rewriting all other routes to /index.html, and to set correct Content-Type headers for sitemap/robots.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-17",
      "title": "ICP asset-canister configuration for caching and headers",
      "synonyms": [
        ".ic-assets.json",
        "Asset canister rules"
      ],
      "description": "Defines caching policies and security/MIME headers, including explicit Content-Type for sitemap.xml and robots.txt and no-cache for index.html.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-18",
      "title": "Vite build and dev-server configuration for static/ICP hosting",
      "synonyms": [
        "Relative base configuration",
        "Dev proxy"
      ],
      "description": "Configures Vite with base './', hashed asset output under assets/, clean builds (emptyOutDir), and a dev proxy for /api to a local ICP replica.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-19",
      "title": "Internet Identity authentication provider (frontend)",
      "synonyms": [
        "AuthClient integration",
        "InternetIdentityProvider"
      ],
      "description": "React context provider that initializes @dfinity/auth-client, restores identity on mount, supports login/logout, and exposes status flags and errors.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-20",
      "title": "Backend canister actor creation and caching (frontend)",
      "synonyms": [
        "useActor",
        "Identity-bound actor"
      ],
      "description": "Creates an anonymous actor when logged out and an identity-bound actor when logged in; actor is cached in React Query by principal and triggers invalidation/refetch of dependent queries when it changes.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-21",
      "title": "Safe backend actor initialization hook",
      "synonyms": [
        "useBackendActorSafe",
        "Non-fatal RBAC init"
      ],
      "description": "Creates an identity-bound actor and conditionally attempts RBAC initialization only when a caffeineAdminToken secret is present; initialization failures are logged and treated as non-fatal.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-22",
      "title": "URL parameter utilities with secure hash-secret handling",
      "synonyms": [
        "urlParams",
        "Hash secret extraction"
      ],
      "description": "Utilities to read URL parameters from query/hash, persist values in sessionStorage, and extract sensitive secrets from the URL hash while removing them from the address bar via history.replaceState.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-23",
      "title": "Per-caller user profile hooks (frontend)",
      "synonyms": [
        "useGetCallerUserProfile",
        "useSaveCallerUserProfile"
      ],
      "description": "React Query hook to fetch the current caller’s profile and an async helper to save it via the backend actor, combining actor-fetching and query loading states.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-24",
      "title": "Role-based access control (Motoko)",
      "synonyms": [
        "RBAC",
        "AccessControl",
        "admin/user/guest roles"
      ],
      "description": "Implements roles (#admin/#user/#guest); supports initialization using a canister env admin token + user-provided secret, querying caller role/admin status, and admin-only role assignment.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-25",
      "title": "Per-user profile storage with authorization (Motoko)",
      "synonyms": [
        "UserProfile storage",
        "getCallerUserProfile/saveCallerUserProfile"
      ],
      "description": "Stores per-principal UserProfile records in an in-memory Map; read/write is gated to #user permission, while admins can query another principal’s profile via getUserProfile.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "feature-add-a-favicon-generated-from-the-existing-sangharsh-classes-logo-and-ensure-it-is-published-at-the-site-root-so-it-is-accessible-at-https-sangharshclasses-in-favicon-png-and-or-https-sangharshclasses-in-favicon-ico-place-the-favicon-files-in-the-frontend-public-root-so-the-build-outputs-them-at-the-domain-root",
      "title": "Add a favicon generated from the existing Sangharsh Classes logo and ensure it is published at the site root so it is accessible at https://sangharshclasses.in/favicon.png and/or https://sangharshclasses.in/favicon.ico. Place the favicon files in the frontend public root so the build outputs them at the domain root.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-index-html-to-include-correct-favicon-link-tags-in-the-head-including-at-minimum-a-png-icon-reference-matching-the-user-s-example-e-g-link-rel-icon-href-favicon-png-type-image-png",
      "title": "Update frontend/index.html to include correct favicon link tags in the <head>, including at minimum a PNG icon reference matching the user’s example (e.g., <link rel=\"icon\" href=\"/favicon.png\" type=\"image/png\">).",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-update-site-metadata-in-frontend-index-html-so-google-can-detect-the-site-logo-correctly-by-adding-appropriate-structured-data-json-ld-for-the-website-organization-and-referencing-an-absolute-logo-url-on-the-canonical-domain-https-sangharshclasses-in-that-points-to-the-published-favicon-logo-image",
      "title": "Update site metadata in frontend/index.html so Google can detect the site logo correctly by adding appropriate structured data (JSON-LD) for the website/organization and referencing an absolute logo URL on the canonical domain (https://sangharshclasses.in/...) that points to the published favicon/logo image.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-prevent-caching-routing-issues-from-blocking-favicon-updates-by-ensuring-favicon-files-are-excluded-from-spa-fallback-rewriting-and-have-appropriate-hosting-headers-caching-rules-for-reliable-retrieval-on-icp-hosting",
      "title": "Prevent caching/routing issues from blocking favicon updates by ensuring favicon files are excluded from SPA fallback rewriting and have appropriate hosting headers/caching rules for reliable retrieval on ICP hosting.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-redeploy-the-site-after-the-favicon-and-metadata-changes-and-verify-in-production-that-the-favicon-is-reachable-at-the-exact-urls-requested-and-that-no-caching-routing-misconfiguration-prevents-access",
      "title": "Redeploy the site after the favicon and metadata changes and verify in production that the favicon is reachable at the exact URLs requested and that no caching/routing misconfiguration prevents access.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add proper favicon/logo for Google search results: include PNG/ICO favicon in site root, add <link rel=\"icon\"> tags in <head>, ensure correct Content-Type/caching and public accessibility at sangharshclasses.in/favicon.(png|ico), then redeploy.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "architectural_notes": [
    "Frontend is a Vite + React SPA composed of section components and smooth-scroll navigation (no router evident in the provided code).",
    "Styling uses TailwindCSS with CSS variables (OKLCH tokens) and shadcn/ui-style primitives (Button/Card/Sheet).",
    "Async state, caching, and actor lifecycle are managed with TanStack React Query.",
    "Authentication is handled via Internet Identity using @dfinity/auth-client, exposed through a React Context provider.",
    "ICP backend is written in Motoko with an AccessControl module; authorization endpoints are composed via a mixin (include MixinAuthorization(state)).",
    "RBAC initialization depends on a canister env var (CAFFEINE_ADMIN_TOKEN) and a user-provided secret passed from the frontend.",
    "SEO strategy combines static tags (index.html) and runtime guards to enforce canonical/og:url and apply noindex on the Caffeine subdomain.",
    "Static hosting hardening is provided via 404.html SPA fallback plus Netlify-style _redirects/_headers, and ICP-specific .ic-assets.json headers/caching rules.",
    "Vite is configured with base './' and deterministic hashed asset output to support canister/static hosting paths.",
    "URL secret handling uses hash-fragment extraction + sessionStorage persistence and URL cleanup via history.replaceState."
  ],
  "known_issues": [
    "frontend/src/admin/** and several admin-related hooks/components exist but are empty placeholders in this snapshot; an admin panel/CMS is not implemented here.",
    "frontend/public/google53082ab74af04c28.html appears empty in the provided snapshot; Google Search Console verification may fail if the required verification content is missing.",
    "useActor always calls _initializeAccessControlWithSecret (even when the token is empty), which can trap and break authenticated flows if CAFFEINE_ADMIN_TOKEN is not set in the canister environment.",
    "useBackendActorSafe skips access-control initialization when no caffeineAdminToken is present, which can leave authenticated users unregistered and cause #user-gated backend calls to trap.",
    "AccessControl.getUserRole traps with \"User is not registered\" for non-anonymous uninitialized principals; any permission check that calls getUserRole can therefore trap instead of returning a safe default.",
    "Backend state (roles and userProfiles) is stored in in-memory Maps and is not persisted to stable memory; data will be lost on canister upgrade/reinstall.",
    "frontend/public/404.html stores redirectPath in sessionStorage, but the app has no routing/deeplink restoration logic, so preserved deep paths are not restored.",
    "There are two global CSS files (frontend/index.css and frontend/src/index.css); only the src version is imported, which can cause drift/confusion.",
    "_redirects/_headers are Netlify-style configs and may not be honored by all hosting targets without equivalent platform configuration (ICP asset canister relies on .ic-assets.json instead).",
    "frontend/DOMAIN_SETUP.md is truncated/incomplete in the provided snapshot (DNS record details are not fully present)."
  ],
  "isFixRequest": true,
  "imageRequirements": "## Required Images\n- Square favicon derived from the existing Sangharsh Classes logo with clean padding and high contrast (favicon.png.dim_32x32.png)\n- Multi-size ICO favicon derived from the existing Sangharsh Classes logo (favicon.ico.dim_256x256.ico)",
  "generatedImages": [
    {
      "filename": "favicon.png.dim_32x32.png",
      "description": "Square favicon derived from the existing Sangharsh Classes logo with clean padding and high contrast",
      "targetWidth": 32,
      "targetHeight": 32
    },
    {
      "filename": "favicon.ico.dim_256x256.ico",
      "description": "Multi-size ICO favicon derived from the existing Sangharsh Classes logo",
      "targetWidth": 256,
      "targetHeight": 256
    }
  ],
  "gameProjectType": "none",
  "projectName": "Sangharsh Classes",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}