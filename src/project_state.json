{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Sangharsh Classes is a Vite + React + TailwindCSS single-page marketing site for a coaching institute (classes 7th–12th) featuring section-based content (Hero, About, Faculty, Courses, Contact, Footer) and strong SEO/static-hosting hardening (canonical + OpenGraph tags, JSON-LD structured data, sitemap.xml, robots.txt, Google Search Console verification file, SPA 404 fallback exclusions, and explicit Content-Type headers for key static files). The repo also includes an Internet Computer (ICP) Motoko backend canister implementing role-based access control (admin/user/guest) bootstrapped via a canister environment secret and per-caller user profile storage. The frontend integrates Internet Identity authentication and uses TanStack React Query for caching and actor/query lifecycle management.",
  "existing_features": [
    {
      "id": "IF-1",
      "title": "Single-page public marketing homepage",
      "synonyms": [
        "Landing page",
        "Marketing SPA"
      ],
      "description": "Renders a public homepage composed of Header, Hero, About, Faculty, Courses, Contact, and Footer sections, plus a floating WhatsApp CTA.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-2",
      "title": "Responsive header with smooth-scroll section navigation",
      "synonyms": [
        "Section navigation",
        "Mobile sheet menu"
      ],
      "description": "Fixed header that changes style on scroll and provides desktop + mobile navigation buttons that smoothly scroll to section anchors via scrollIntoView.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-3",
      "title": "Hero section with CTAs and stats",
      "synonyms": [
        "Top banner",
        "Hero block"
      ],
      "description": "Hero banner with background image overlay, bilingual tagline, “100% Result Guarantee” badge, CTA buttons (enroll/view courses), and stat cards.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-4",
      "title": "About section (static content)",
      "synonyms": [
        "About Sangharsh Classes"
      ],
      "description": "Displays hardcoded multi-paragraph about text and a centered “Result Oriented” feature card.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-5",
      "title": "Faculty section (static cards)",
      "synonyms": [
        "Teacher listing",
        "Faculty grid"
      ],
      "description": "Renders a responsive grid of hardcoded faculty cards with photos, subject badges, role, experience, and specialization fallback text.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-6",
      "title": "Courses section (static offerings for classes 7th–12th)",
      "synonyms": [
        "Programs grid",
        "Offerings"
      ],
      "description": "Shows six hardcoded class offerings (7–12) with descriptions and feature bullets plus a promotional subject banner.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-7",
      "title": "Contact section with deep-link actions",
      "synonyms": [
        "Call/email/WhatsApp actions"
      ],
      "description": "Displays phone/email/location and provides one-click actions using tel:, mailto:, and wa.me links/buttons plus a “Schedule a Visit” WhatsApp CTA.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-8",
      "title": "Footer with quick links and social links",
      "synonyms": [
        "Site footer",
        "Social icons"
      ],
      "description": "Footer includes branding/about text, section anchor quick links, contact info, outbound social links (Facebook/Instagram/YouTube), and a built-with attribution line.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-9",
      "title": "Floating WhatsApp contact button",
      "synonyms": [
        "WhatsApp FAB",
        "Sticky WhatsApp CTA"
      ],
      "description": "Fixed-position WhatsApp button that opens a chat to the configured phone number in a new tab.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-10",
      "title": "Top-level React error boundary with fallback UI",
      "synonyms": [
        "AppErrorBoundary",
        "Runtime fallback screen"
      ],
      "description": "Wraps the app in an error boundary and displays a user-friendly error card with refresh/home actions to prevent a blank screen on runtime errors.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-11",
      "title": "Runtime diagnostics logging",
      "synonyms": [
        "Global error logging",
        "Unhandled rejection capture"
      ],
      "description": "Registers window error and unhandledrejection listeners and logs initialization markers to aid production debugging.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-12",
      "title": "Runtime SEO guards (canonical/noindex enforcement)",
      "synonyms": [
        "SEO guard",
        "Canonical URL enforcement"
      ],
      "description": "At app startup, enforces canonical and og:url to the custom domain and applies robots noindex/nofollow when running on the Caffeine subdomain.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-13",
      "title": "Homepage SEO markup and structured data in index.html",
      "synonyms": [
        "Canonical tag",
        "OpenGraph tags",
        "JSON-LD Organization/WebSite"
      ],
      "description": "Defines title/meta description, canonical + og tags, og:image, favicon link tags, and JSON-LD structured data referencing the site logo/favicon URL.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-14",
      "title": "SEO static assets (sitemap.xml and robots.txt)",
      "synonyms": [
        "Sitemap",
        "Robots"
      ],
      "description": "Provides a root sitemap.xml listing the canonical homepage URL and a robots.txt that allows crawling and references the sitemap.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-15",
      "title": "Google Search Console verification file",
      "synonyms": [
        "google-site-verification HTML file"
      ],
      "description": "Hosts a Google Search Console verification file at a fixed path so domain ownership verification can succeed.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-16",
      "title": "Static hosting SPA fallback with static-file exclusions",
      "synonyms": [
        "404.html fallback",
        "Deep-link support"
      ],
      "description": "Provides a SPA fallback (404.html) that redirects non-root paths to the app root while explicitly excluding key static files (sitemap.xml, robots.txt, favicon.ico, favicon.png, Google verification file) from being redirected.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-17",
      "title": "Static hosting headers and redirects rules",
      "synonyms": [
        "_headers",
        "_redirects"
      ],
      "description": "Defines Netlify-style headers (correct Content-Type for sitemap/robots/favicons) and redirects to ensure key static files are served directly rather than rewritten to index.html.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-18",
      "title": "ICP asset-canister configuration for caching and headers",
      "synonyms": [
        ".ic-assets.json",
        "Asset canister rules"
      ],
      "description": "Configures caching and security headers for ICP asset serving, with explicit Content-Type and cache rules for index.html, sitemap.xml, robots.txt, favicon.png, favicon.ico, and 404.html.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-19",
      "title": "Deployment and domain setup documentation",
      "synonyms": [
        "DEPLOYMENT_CHECKLIST",
        "DOMAIN_SETUP"
      ],
      "description": "Includes operational docs for clean builds, publish-directory verification, deep-link/static-file testing, SEO validation, and custom-domain/DNS/redirect setup guidance.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-20",
      "title": "Internet Identity authentication provider (frontend)",
      "synonyms": [
        "AuthClient integration",
        "InternetIdentityProvider"
      ],
      "description": "React context provider that initializes @dfinity/auth-client, restores identity on mount, supports login/logout, and exposes status flags and errors.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-21",
      "title": "Backend canister actor creation and caching (frontend)",
      "synonyms": [
        "useActor",
        "Identity-bound actor"
      ],
      "description": "Creates an anonymous actor when logged out and an identity-bound actor when logged in; the actor is cached using a React Query key based on the principal and triggers invalidation/refetch of dependent queries when it changes.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-22",
      "title": "Safe backend actor initialization hook",
      "synonyms": [
        "useBackendActorSafe",
        "Non-fatal RBAC init"
      ],
      "description": "Creates an identity-bound actor and conditionally attempts RBAC initialization only when a caffeineAdminToken secret is present; initialization failures are logged and treated as non-fatal.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-23",
      "title": "URL parameter utilities with secure hash-secret handling",
      "synonyms": [
        "urlParams",
        "Hash secret extraction"
      ],
      "description": "Utilities to read URL parameters from query/hash, persist values in sessionStorage, and extract sensitive secrets from the URL hash while removing them from the address bar via history.replaceState.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-24",
      "title": "Per-caller user profile hooks (frontend)",
      "synonyms": [
        "useGetCallerUserProfile",
        "useSaveCallerUserProfile"
      ],
      "description": "React Query hook to fetch the current caller’s profile and an async helper to save it via the backend actor, combining actor-fetching and query loading states.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-25",
      "title": "Role-based access control (Motoko)",
      "synonyms": [
        "RBAC",
        "AccessControl",
        "admin/user/guest roles"
      ],
      "description": "Implements roles (#admin/#user/#guest); supports initialization using a canister env admin token + user-provided secret, querying caller role/admin status, and admin-only role assignment.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-26",
      "title": "Per-user profile storage with authorization (Motoko)",
      "synonyms": [
        "UserProfile storage",
        "getCallerUserProfile/saveCallerUserProfile"
      ],
      "description": "Stores per-principal UserProfile records in an in-memory Map; read/write is gated to #user permission, while admins can query another principal’s profile via getUserProfile.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "feature-generate-a-complete-offline-capable-static-export-of-the-current-marketing-website-same-content-sections-text-and-layout-as-the-existing-react-site-in-the-following-exact-folder-structure-inside-the-downloadable-package-index-html-css-style-css-js-script-js-assets-images",
      "title": "Generate a complete offline-capable static export of the current marketing website (same content, sections, text, and layout as the existing React site) in the following exact folder structure inside the downloadable package: index.html, css/style.css, js/script.js, assets/images/.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-clear-user-facing-button-labeled-exactly-download-website-code-on-the-website-ui-that-initiates-download-of-the-full-website-code-as-a-zip-file-containing-the-static-export-structure-index-html-css-style-css-js-script-js-assets-images",
      "title": "Add a clear user-facing button labeled exactly \"Download Website Code\" on the website UI that initiates download of the full website code as a ZIP file containing the static export structure (index.html, css/style.css, js/script.js, assets/images/).",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-downloadable-zip-always-matches-the-currently-built-website-content-design-i-e-changes-to-homepage-content-layout-styles-in-the-app-are-reflected-in-the-exported-html-css-js-on-the-next-build-and-does-not-omit-any-current-sections-or-text",
      "title": "Ensure the downloadable ZIP always matches the currently built website content/design (i.e., changes to homepage content/layout/styles in the app are reflected in the exported HTML/CSS/JS on the next build) and does not omit any current sections or text.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-zip-file-available-as-a-static-asset-served-by-the-deployed-frontend-so-the-download-works-without-requiring-any-backend-changes-and-ensure-appropriate-caching-headers-so-users-can-reliably-download-it",
      "title": "Make the ZIP file available as a static asset served by the deployed frontend (so the download works without requiring any backend changes) and ensure appropriate caching/headers so users can reliably download it.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Provide full static website source export (HTML/CSS/JS/assets) with structured folders and a 'Download Website Code' button that downloads a ZIP for offline/self-hostable use.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "architectural_notes": [
    "Frontend is a Vite-powered React SPA styled with TailwindCSS (OKLCH CSS variables) and shadcn/ui primitives.",
    "Data fetching/caching uses @tanstack/react-query; backend actor instances are created via a query keyed by principal and used by downstream hooks.",
    "Authentication is handled via Internet Identity using @dfinity/auth-client in a React Context provider with identity persistence across reloads.",
    "ICP backend is written in Motoko and composes authorization functionality via an include/mixin pattern (MixinAuthorization + AccessControl).",
    "RBAC bootstrapping uses an environment variable (CAFFEINE_ADMIN_TOKEN) on the canister plus a user-provided secret to assign the first admin.",
    "SEO approach combines static index.html meta/JSON-LD with runtime guards that enforce canonical/og:url and apply noindex on the Caffeine subdomain.",
    "Static hosting support includes 404.html SPA fallback logic plus Netlify-style _redirects/_headers and ICP asset-canister rules via .ic-assets.json.",
    "Sensitive token handling on the frontend reads secrets from the URL hash and persists them in sessionStorage while removing them from the visible URL.",
    "Backend authorization checks trap on unauthorized access; frontend uses a “safe actor” hook in some places to avoid fatal init failures."
  ],
  "known_issues": [
    "Many admin-related frontend files under frontend/src/admin/** and several hooks (useAdminStatus/useAdminUsers/useWebsiteContent/useSectionConfigs/contentSerialization) are empty placeholders in this snapshot; an admin CMS panel is not actually implemented.",
    "frontend/src/hooks/useActor.ts always calls _initializeAccessControlWithSecret(adminToken) (adminToken may be empty). Backend traps if CAFFEINE_ADMIN_TOKEN is not set, which can break authenticated flows on misconfigured deployments.",
    "AccessControl.getUserRole traps with \"User is not registered\" for non-anonymous principals that haven’t been initialized; callers may see traps instead of a safe default role.",
    "Backend roles and userProfiles are stored only in in-memory Maps and are not persisted to stable memory; data will be lost on canister upgrade/reinstall.",
    "The SPA 404 fallback stores redirectPath in sessionStorage, but no client router/restore logic is present in the provided code, so deep-link restoration is likely incomplete.",
    "There are two global CSS files (frontend/index.css and frontend/src/index.css); only the src version is imported, which can cause confusion/drift.",
    "frontend/index.html is the development entry (loads /src/main.tsx); if hosting accidentally serves source instead of dist output, production will break (docs warn about this but it remains a deployment footgun).",
    "useBackendActorSafe skips access-control initialization when no caffeineAdminToken is present; #user-gated backend calls (e.g., getCallerUserProfile) can trap for authenticated-but-unregistered users.",
    "User requires full static source code export (HTML/CSS/JS/assets) plus ZIP download/GitHub workflow; current platform/site setup may not support direct export without adding a dedicated static export build + packaging pipeline."
  ],
  "isFixRequest": false,
  "gameProjectType": "none",
  "projectName": "Sangharsh Classes",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}